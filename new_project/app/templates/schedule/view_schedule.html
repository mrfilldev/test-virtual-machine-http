{% extends "base.html" %}


{% block body %}

<br>
<link href="https://cdnjs.cloudflare.com/ajax/libs/tabulator/4.1.1/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/tabulator/4.1.1/js/tabulator.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<meta http-equiv="refresh" content="5000">
<script>
$(document).ready(function () {
    var url = 'https://cp.simpple.ru/api/v1/widgets/ratings/753bf174295992b3ca2d0bd4a78d6598/popular&limit=8';
    $.get(url, function (response) {
        // Инициализируем таблицу
        return new Tabulator('#example-table', {
            data: JSON.parse(response),
            layout: 'fitColumns',
            columns: [
                {title: 'Статья', field: 'title', width: 550},
                {title: 'Количество голосов', field: 'countRates', align: 'left', formatter: 'progress'},
                {title: 'Средняя оценка', field: 'rating'}
            ]
        })
    });
});
</script>
<!--<script type="text/javascript" src="static/tabulator.js"></script>-->
<div id="example-table"></div>
<br>
<br>
<br>
{% endblock %}


