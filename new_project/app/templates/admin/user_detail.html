{% extends "base.html" %}

{% block body %}
<br>
<form method=POST action="{{ url_for('admin_blueprint.admin_user_detail', user_id=context['user']._id) }}">
    <div class="container">
        <div class="row">
            <div class="col-2">

                <button style="width: 130px" type="submit" class="btn btn-outline-secondary"
                        href="{{ url_for('admin_blueprint.admin_user_detail', user_id=context['user'].id) }}">
                    Сохранить
                </button>


                <a style="width: 130px" class="btn btn-outline-danger"
                   href="{{ url_for('admin_blueprint.admin_delete_user', user_id=context['user']._id) }}">
                    Удалить
                </a>

            </div>
            <div class="col-10">
                <main class="container-sm">
                    <div class="table-responsive">

                        <table class="table table-bordered table-center">
                            <thead class="table-light">
                            <tr>
                                <th scope="col" colspan="3">Пользователь</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td style="width: 200px">
                                    логин:
                                </td>
                                <td>
                                    <input name="lon" style="width: 350px" type="text" class="form-control"
                                           required placeholder="longitude" value="{{ context['user'].login }}">

                                </td>
                            </tr>
                            <tr>
                                <td style="width: 200px">
                                    id:
                                </td>
                                <td>
                                    <input name="lon" style="width: 350px" type="text" class="form-control"
                                           required placeholder="longitude" value="{{ context['user']._id }}">

                                </td>
                            </tr>
                            <tr>
                                <td style="width: 200px">
                                    уровень доступа:
                                </td>
                                <td>
                                    <select style="width: 350px" class="form-select"
                                            name="role">
                                        <option disabled="disabled">(не указано)</option>

                                        {% for i in context['UserRole'] %}
                                        <option value="{{i.name}}" {% if context[
                                        'user'].role == i.name %} selected {% endif %}>{{ i.value }}</option>
                                        {% endfor %}
                                    </select>
                                    </label>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 200px">
                                    дата регистрации:
                                </td>
                                <td>
                                    <input name="lon" style="width: 350px" type="text" class="form-control"
                                           required placeholder="longitude"
                                           value="{{ context['user'].date_registered | format_datetime }}">

                                </td>
                            </tr>
                            {% if context['user'].networks is defined %}
                            <tr>
                                <td style="width: 200px">
                                    Cеть:
                                </td>
                                <td>
                                    <select style="width: 350px" class="form-select" name="network">
                                        <option disabled="disabled">(не указано)</option>

                                        {% for i in context.networks %}
                                        <option value="{{i._id}}"
                                         {% if (i._id == context.user.networks[0]) %} selected="selected" { %endif %}>{{ i.network_name }} -  {{i._id}}</option>
                                        {% endfor %}
                                        </select>
                                    </select>
                                </td>
                            </tr>
                            {% endif %}
                            </tbody>
                        </table>


                        ________________________________________________________________________________________________<br>
                        {{ context['user']}}
                        ________________________________________________________________________________________________<br>
                    </div>
                </main>
            </div>
        </div>
    </div>
</form>
{% endblock %}